(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{34:function(e,n,t){},35:function(e,n,t){"use strict";t.r(n);var r=t(0),i=t.n(r),o=t(7),c=t.n(o),a=t(21),u=t(3),d=t(14),s=t(10),l=t(2),f=t(4),v=t(5),g=.7;function m(e,n,t){if(n===t)return e;switch(n){case"vw":e*=window.innerWidth/100;break;case"vh":e*=window.innerHeight/100}switch(t){case"vw":return e*(100/window.innerWidth);case"vh":return e*(100/window.innerHeight);case"px":return e}}var b,A,h,j=t(1),O=u.c.div(b||(b=Object(f.a)(["\n  --elementSize: 10vmin;\n  position: absolute;\n  width: var(--elementSize);\n  height: var(--elementSize);\n  background-color: ",';\n  border-radius: 1vmin;\n  padding: 0;\n\n  background-image: url("','");\n\n  background-repeat: no-repeat;\n  background-size: var(--elementSize);\n  image-rendering: pixelated;\n  image-rendering: crisp-edges;\n\n  box-shadow: 0 0 10px ',";\n\n  transition: transform 0.3s cubic-bezier(0.23, 1, 0.32, 1),\n    box-shadow 0.3s cubic-bezier(0.23, 1, 0.32, 1), background-image 0.2s linear;\n\n  :hover {\n    transform: scale(1.1);\n    cursor: pointer;\n    box-shadow: 0 0 15px ",";\n  }\n\n  :active {\n    transform: scale(1.2);\n    box-shadow: 0 0 20px ",";\n  }\n\n  ","\n  ","\n  ",";\n"])),(function(e){return e.theme.color.eleBg}),(function(e){return 0===e.elementId?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAJBJREFUOE+lk8ERgCAMBKEHy/FBCZZqCTwsxx5wMhoJIUeYgS/s5iAkBmelq5S8x4iOwQ0GlgQEswilgAkkPJIMBWkLId/19lYKU8DVtYBUWgIFFjwlsO6uWyhTdAmWBFMwP+rxfq4mgSeQHQmWgIxIYsFdAiRoYDr0VTcFUtKBCoaCv21nnQVZVbbVnUZv3B+lKUYR3c3j4wAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAKVJREFUOE+lkzEOwyAMRUPUMXsukLk9UU+XE7VzLpA9Y0SrPxgZ428UhQWE/Z+/QU5DZ22v8bd8cmJpNAABxNhvAyIIdSDVxTpz4QKsOII0ACZmbVQAK56e43B8c/UBtpUuAOoIUgBedV1aQ7QLFwDrdjEXDcATC8xzcQmg30PaaB5RHMzvR+liX89yFhcUgExANAB3AgkBMkAMYMXID6exN+qI/wFjvWARv6aB+AAAAABJRU5ErkJggg=="}),(function(e){return e.theme.color.eleShadow}),(function(e){return e.theme.color.eleShadow}),(function(e){return e.theme.color.eleShadow}),(function(e){return e.mergingData?"transform: scale(1.3) !important; \n  transition: transform ".concat(g,"s\n    cubic-bezier(0.075, 0.82, 0.165, 1);"):null}),(function(e){var n=e.mergedData;return n?"transform: scale(0.3) !important; \n  top: ".concat(n.targetPos.y,"vh !important;\n  left: ").concat(n.targetPos.x,"vw !important;\n  transition: transform ").concat(g,"s\n  cubic-bezier(.72,-1.24,.33,-0.04), \n    top ").concat(g,"s cubic-bezier(.32,-3.29,.85,.59),\n    left ").concat(g,"s cubic-bezier(.32,-3.29,.85,.59);"):null}),(function(e){var n=e.isHovering,t=e.theme;return n?"transform: scale(1.1); \n      box-shadow: 0 0 15px ".concat(t.color.eleShadow,";"):null})),x=u.c.div(A||(A=Object(f.a)(['\n  position: absolute;\n  color: white;\n  bottom: -1.2em;\n\n  font-family: "Azeret Mono", monospace;\n  font-weight: 700;\n  font-size: 1.2em;\n  width: 100%;\n  text-align: center;\n']))),p=i.a.forwardRef((function(e,n){var t,i=Object(r.useState)({x:0,y:0}),o=Object(l.a)(i,2),c=o[0],a=o[1],u=Object(r.useState)(0),d=Object(l.a)(u,2),s=d[0],f=d[1],v=Object(r.useRef)(),g=Object(r.useCallback)((function(n){e.mergingData||e.mergedData||a((function(t){var r,i,o,c;return{x:m(Math.min(Math.max(m(t.x,"vw","px")+n.movementX,0),e.screenRef.current.offsetWidth-(null!==(r=null===v||void 0===v||null===(i=v.current)||void 0===i?void 0:i.offsetWidth)&&void 0!==r?r:0)),"px","vw"),y:m(Math.min(Math.max(m(t.y,"vh","px")+n.movementY,0),e.screenRef.current.offsetHeight-(null!==(o=null===v||void 0===v||null===(c=v.current)||void 0===c?void 0:c.offsetHeight)&&void 0!==o?o:0)),"px","vh")}}))}),[e.mergingData,e.mergedData,e.screenRef]);return Object(r.useEffect)((function(){e.isDragging?window.addEventListener("mousemove",g):window.removeEventListener("mousemove",g)}),[e.isDragging,g]),Object(r.useEffect)((function(){e.zIndex&&f(e.zIndex)}),[e.zIndex]),Object(j.jsx)(O,{elementId:e.elementId,style:{left:c.x+"vw",top:c.y+"vh",zIndex:null!==(t=e.zIndex)&&void 0!==t?t:s},ref:function(e){v.current=e,"function"===typeof n?n(e):n&&(n.current=e)},isHovering:e.isHovering,mergingData:e.mergingData,mergedData:e.mergedData,onMouseDown:e.onMouseDown,"data-id":e.id,children:Object(j.jsx)(x,{"data-id":e.id,children:0===e.elementId?"WATER DROP":"FIRE"})})})),w=u.c.div(h||(h=Object(f.a)(["\n  width: 100vw;\n  height: 100vh;\n  background-color: ",";\n"])),(function(e){return e.theme.color.bg})),E=function(){var e=Object(r.useState)(Array.from({length:20},(function(){return{elementId:0,id:Object(v.c)()}}))),n=Object(l.a)(e,2),t=n[0],i=n[1],o=Object(r.useState)(void 0),c=Object(l.a)(o,2),a=c[0],u=c[1],f=Object(r.useState)(void 0),g=Object(l.a)(f,2),b=g[0],A=g[1],h=Object(r.useState)([]),O=Object(l.a)(h,2),x=O[0],E=O[1],I=Object(r.useState)([]),y=Object(l.a)(I,2),S=y[0],B=y[1],R=Object(r.useState)(0),k=Object(l.a)(R,2),z=k[0],D=k[1],U=Object(r.useRef)(),M=Object(r.useCallback)((function(e){return function(){x.find((function(n){return n.id===e}))||S.find((function(n){return n.id===e}))||(D((function(e){return e+1})),u(e))}}),[S,x]),C=Object(r.useRef)({}),F=function(e){var n,t=null===(n=C.current[e])||void 0===n?void 0:n.getBoundingClientRect();if(t)for(var r=Object(s.a)(Object.entries(C.current)).sort((function(e,n){var t,r,i,o;return(null===(t=e[1])||void 0===t||null===(r=t.style)||void 0===r?void 0:r.zIndex)?(null===(i=n[1])||void 0===i||null===(o=i.style)||void 0===o?void 0:o.zIndex)?+n[1].style.zIndex-+e[1].style.zIndex:-1:1})),i=function(e){var n=r[e][1];if(!n)return"continue";var i=n.getBoundingClientRect();return t.top<=i.bottom&&t.bottom>=i.top&&t.left<=i.right&&t.right>=i.left?{v:Object.keys(C.current).find((function(e){return C.current[e]===n}))}:void 0},o=1;o<r.length;o++){var c=i(o);if("continue"!==c&&"object"===typeof c)return c.v}};return Object(r.useEffect)((function(){var e=function(){return u(void 0)},n=function(e){if(u(void 0),A(void 0),e.target instanceof HTMLElement&&e.target.dataset.id){var n=e.target.dataset.id;if(!n)return;var t=F(n);if("undefined"===typeof t)return;!function(e,n,t){var r,o,c=null===(r=C.current[e])||void 0===r?void 0:r.getBoundingClientRect(),a=null===(o=C.current[n])||void 0===o?void 0:o.getBoundingClientRect();if(c&&a){var u={x:m(c.x,"px","vw"),y:m(c.y,"px","vh")},l={x:m(a.x,"px","vw"),y:m(a.y,"px","vh")};E((function(n){return[].concat(Object(s.a)(n),[{id:e,targetPos:l}])})),B((function(e){return[].concat(Object(s.a)(e),[{id:n,targetPos:u}])})),setTimeout((function(){i((function(n){return n.map((function(n,r){return n.id===e?Object(d.a)(Object(d.a)({},n),{},{elementId:t}):n}))})),E((function(n){return n.filter((function(n,t){return n.id!==e}))})),B((function(e){return e.filter((function(e,t){return e.id!==n}))})),i((function(e){return e.filter((function(e,t){return e.id!==n}))}))}),700)}}(n,t,1)}},t=U.current;return t.addEventListener("mouseup",n),t.addEventListener("mouseleave",e),function(){t.removeEventListener("mouseup",n),t.removeEventListener("mouseleave",e)}}),[]),Object(r.useEffect)((function(){var e=function(){if("undefined"!==typeof a){var e=F(a);A(e)}},n=U.current;return n.addEventListener("mousemove",e),function(){n.removeEventListener("mousemove",e)}}),[a]),Object(r.useEffect)((function(){var e=t.map((function(e){return e.id}));C.current=Object.fromEntries(Object.entries(C.current).filter((function(n){return e.includes(n[0])})))}),[t]),Object(j.jsx)(w,{ref:U,children:t.map((function(e,n){return Object(j.jsx)(p,{id:e.id,elementId:e.elementId,isDragging:a===e.id,isHovering:b===e.id,mergingData:x.find((function(n){return e.id===n.id})),mergedData:S.find((function(n){return e.id===n.id})),onMouseDown:M(e.id),screenRef:U,ref:function(n){C.current[e.id]=n},zIndex:a===e.id?z+1:void 0},e.id)}))})},I={unlockedElements:[1,2,3,4]},y=Object(v.b)({name:"save",initialState:I,reducers:{unlockElement:function(e,n){e.unlockedElements.includes(n.payload)||e.unlockedElements.push(n.payload)}}}),S=(y.actions.unlockElement,y.reducer);function B(e,n){var t;for(var r in e=null!==(t=e)&&void 0!==t?t:{},n){var i;if(Array.isArray(n[r]))e[r]=null!==(i=e[r])&&void 0!==i?i:[],R(e[r],n[r]);else if("object"===typeof n[r])e[r]=B(e[r],n[r]);else{var o;e[r]=n[r].constructor(null!==(o=e[r])&&void 0!==o?o:n[r])}}return e}function R(e,n){for(var t=0,r=n.length;t<r;t++)if(Array.isArray(n[t]))R(e[t],n[t]);else if("object"===typeof n[t])e[t]=B(e[t],n[t]);else{var i;e[t]=n[t].constructor(null!==(i=e[t])&&void 0!==i?i:n[t])}return e}var k=t(20),z=t.n(k),D=JSON.parse(localStorage.getItem("notAMergeGame")||"{}"),U=Object(v.a)({reducer:{save:S},preloadedState:B(D,{save:I})});U.subscribe((function(){z.a.throttle((function(){return localStorage.setItem("notAMergeGame",JSON.stringify(U.getState()))}),1e3)}));var M,C=U,F=Object(u.b)(M||(M=Object(f.a)(["\n  body {\n    overflow: hidden;\n  }\n  * {\n    margin: 0;\n    user-select: none;\n  }\n"]))),Q={color:{bg:"#333",eleBg:"#555",eleShadow:"#000"}};t(34);var L=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(F,{}),Object(j.jsx)(a.a,{store:C,children:Object(j.jsx)(u.a,{theme:Q,children:Object(j.jsx)(E,{})})})]})},J=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,37)).then((function(n){var t=n.getCLS,r=n.getFID,i=n.getFCP,o=n.getLCP,c=n.getTTFB;t(e),r(e),i(e),o(e),c(e)}))};c.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(L,{})}),document.getElementById("root")),J()}},[[35,1,2]]]);
//# sourceMappingURL=main.921d1e4f.chunk.js.map