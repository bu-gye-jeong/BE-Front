{"version":3,"sources":["utils/convert.ts","components/Element.tsx","resources/water.png","components/GameScreen.tsx","slices/saveSlice.tsx","utils/merge.ts","store.tsx","styles/GlobalStyle.tsx","styles/theme.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["convertUnit","value","from","to","window","innerWidth","innerHeight","ElementWrapper","styled","div","theme","color","eleBg","eleShadow","isHovering","ElementName","Element","React","forwardRef","props","ref","useState","x","y","pos","setPos","prevZIndex","setPrevZIndex","targetRef","useRef","handleMouseMove","useCallback","ev","state","Math","min","max","movementX","screenRef","current","offsetWidth","movementY","offsetHeight","useEffect","isDragging","addEventListener","removeEventListener","zIndex","style","left","top","node","onMouseDown","data-index","index","MainScreen","bg","GameScreen","Array","length","elementId","id","nanoid","elements","setElements","undefined","draggingElement","setDragging","hoveringElement","setHovering","maxZIndex","setMaxZIndex","mousedownHandler","elementRefs","testOverlap","elementIndex","rect1","getBoundingClientRect","sortedRefs","sort","a","b","i","v","rect2","bottom","right","indexOf","mouseleaveHandler","mouseupHandler","target","HTMLElement","dataset","parseInt","isNaN","overlapIndex","ele1index","ele2index","toCreate","filter","_","map","mousemoveHandler","slice","el","initialState","unlockedElements","saveSlice","createSlice","name","reducers","unlockElement","action","includes","payload","push","actions","mergeObject","source","isArray","mergeArray","constructor","l","persistedState","JSON","parse","localStorage","getItem","store","configureStore","reducer","save","saveReducer","preloadedState","saveInitialState","subscribe","throttle","setItem","stringify","getState","GlobalStyle","createGlobalStyle","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bc62c8d2.chunk.js","sourcesContent":["type Unit = \"px\" | \"vw\" | \"vh\";\n\nexport function convertUnit(value: number, from: Unit, to: Unit) {\n  if (from === to) return value;\n\n  switch (from) {\n    case \"vw\":\n      value *= window.innerWidth / 100;\n      break;\n    case \"vh\":\n      value *= window.innerHeight / 100;\n      break;\n  }\n  switch (to) {\n    case \"vw\":\n      return (value *= 100 / window.innerWidth);\n    case \"vh\":\n      return (value *= 100 / window.innerHeight);\n    case \"px\":\n      return value;\n  }\n}\n","import React, { useCallback, useRef, useState } from \"react\";\nimport { useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport waterImg from \"../resources/water.png\";\nimport { convertUnit } from \"../utils/convert\";\n\nconst ElementWrapper = styled.div<{ isHovering: boolean }>`\n  --elementSize: 10vmin;\n  position: absolute;\n  width: var(--elementSize);\n  height: var(--elementSize);\n  background-color: ${({ theme }) => theme.color.eleBg};\n  border-radius: 1vmin;\n  padding: 0;\n\n  background-image: url(\"${waterImg}\");\n  background-repeat: no-repeat;\n  background-size: var(--elementSize);\n  image-rendering: pixelated;\n  image-rendering: crisp-edges;\n\n  box-shadow: 0 0 10px ${({ theme }) => theme.color.eleShadow};\n\n  transition: transform 0.3s cubic-bezier(0.23, 1, 0.32, 1),\n    box-shadow 0.3s cubic-bezier(0.23, 1, 0.32, 1);\n\n  :hover {\n    transform: scale(1.1);\n    cursor: pointer;\n    box-shadow: 0 0 15px ${({ theme }) => theme.color.eleShadow};\n  }\n\n  :active {\n    transform: scale(1.2);\n    box-shadow: 0 0 20px ${({ theme }) => theme.color.eleShadow};\n  }\n\n  ${({ isHovering, theme }) => {\n    return isHovering\n      ? `transform: scale(1.1); \n      box-shadow: 0 0 15px ${theme.color.eleShadow};`\n      : null;\n  }}\n`;\n\nconst ElementName = styled.div`\n  position: absolute;\n  color: white;\n  bottom: -1.2em;\n\n  font-family: \"Azeret Mono\", monospace;\n  font-weight: 700;\n  font-size: 1.2em;\n  width: 100%;\n  text-align: center;\n`;\n\ninterface ElementProps {\n  elementId: number;\n  isDragging: boolean;\n  isHovering: boolean;\n  onMouseDown: React.MouseEventHandler<HTMLDivElement> | undefined;\n  screenRef: React.MutableRefObject<HTMLDivElement>;\n  zIndex?: number;\n  index: number;\n}\n\nexport const Element = React.forwardRef<HTMLDivElement, ElementProps>(\n  (props, ref) => {\n    const [pos, setPos] = useState({ x: 0, y: 0 });\n    const [prevZIndex, setPrevZIndex] = useState(0);\n    const targetRef =\n      useRef<HTMLDivElement | null>() as React.MutableRefObject<HTMLDivElement | null>;\n\n    const handleMouseMove = useCallback(\n      (ev: MouseEvent) => {\n        setPos((state) => ({\n          x: convertUnit(\n            Math.min(\n              Math.max(convertUnit(state.x, \"vw\", \"px\") + ev.movementX, 0),\n              props.screenRef.current.offsetWidth -\n                (targetRef?.current?.offsetWidth ?? 0)\n            ),\n            \"px\",\n            \"vw\"\n          ),\n          y: convertUnit(\n            Math.min(\n              Math.max(convertUnit(state.y, \"vh\", \"px\") + ev.movementY, 0),\n              props.screenRef.current.offsetHeight -\n                (targetRef?.current?.offsetHeight ?? 0)\n            ),\n            \"px\",\n            \"vh\"\n          ),\n        }));\n      },\n      [props.screenRef]\n    );\n\n    useEffect(() => {\n      if (props.isDragging) {\n        window.addEventListener(\"mousemove\", handleMouseMove);\n      } else {\n        window.removeEventListener(\"mousemove\", handleMouseMove);\n      }\n    }, [props.isDragging, handleMouseMove]);\n\n    useEffect(() => {\n      if (!props.zIndex) return;\n      setPrevZIndex(props.zIndex);\n    }, [props.zIndex]);\n\n    return (\n      <ElementWrapper\n        style={{\n          left: pos.x + \"vw\",\n          top: pos.y + \"vh\",\n          zIndex: props.zIndex ?? prevZIndex,\n        }}\n        ref={(node) => {\n          targetRef.current = node;\n          if (typeof ref === \"function\") {\n            ref(node);\n          } else if (ref) {\n            (ref as React.MutableRefObject<HTMLDivElement | null>).current =\n              node;\n          }\n        }}\n        isHovering={props.isHovering}\n        onMouseDown={props.onMouseDown}\n        data-index={props.index}>\n        <ElementName>WATER DROP</ElementName>\n      </ElementWrapper>\n    );\n  }\n);\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAJBJREFUOE+lk8ERgCAMBKEHy/FBCZZqCTwsxx5wMhoJIUeYgS/s5iAkBmelq5S8x4iOwQ0GlgQEswilgAkkPJIMBWkLId/19lYKU8DVtYBUWgIFFjwlsO6uWyhTdAmWBFMwP+rxfq4mgSeQHQmWgIxIYsFdAiRoYDr0VTcFUtKBCoaCv21nnQVZVbbVnUZv3B+lKUYR3c3j4wAAAABJRU5ErkJggg==\"","import { nanoid } from \"@reduxjs/toolkit\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { Element } from \"./Element\";\n\nconst MainScreen = styled.div`\n  width: 100vw;\n  height: 100vh;\n  background-color: ${({ theme }) => theme.color.bg};\n`;\n\ninterface IElement {\n  elementId: number;\n  id: string;\n}\n\nconst createNewElement = (elementId: number): IElement => ({\n  elementId,\n  id: nanoid(),\n});\n\nexport const GameScreen = () => {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [elements, setElements] = useState<IElement[]>(\n    Array.from({ length: 20 }, () => createNewElement(0))\n  );\n  const [draggingElement, setDragging] = useState<number | undefined>(\n    undefined\n  );\n  const [hoveringElement, setHovering] = useState<number | undefined>(\n    undefined\n  );\n  const [maxZIndex, setMaxZIndex] = useState(0);\n  const targetRef =\n    useRef<HTMLDivElement>() as React.MutableRefObject<HTMLDivElement>;\n  const mousedownHandler = useCallback(\n    (index: number) => () => {\n      setMaxZIndex((state) => state + 1);\n      setDragging(index);\n    },\n    []\n  );\n  const elementRefs = useRef<Array<HTMLDivElement | null>>([]);\n\n  const testOverlap = (elementIndex: number): number | undefined => {\n    const rect1 = elementRefs.current[elementIndex]?.getBoundingClientRect();\n    if (!rect1) return;\n    const sortedRefs = [...elementRefs.current].sort((a, b) =>\n      a?.style?.zIndex\n        ? b?.style?.zIndex\n          ? +b.style.zIndex - +a.style.zIndex\n          : -1\n        : 1\n    );\n\n    for (let i = 1; i < elementRefs.current.length; i++) {\n      const v = sortedRefs[i];\n      if (!v) continue;\n      const rect2 = v.getBoundingClientRect();\n      if (\n        rect1.top <= rect2.bottom &&\n        rect1.bottom >= rect2.top &&\n        rect1.left <= rect2.right &&\n        rect1.right >= rect2.left\n      )\n        return elementRefs.current.indexOf(v);\n    }\n  };\n\n  useEffect(() => {\n    const merge = (ele1index: number, ele2index: number, toCreate: number) => {\n      const newElements = (elements: IElement[]) =>\n        elements\n          .filter((_, i) => i !== ele2index)\n          .map((v, i) => (i === ele1index ? { ...v, elementId: toCreate } : v));\n      setElements(newElements);\n    };\n\n    const mouseleaveHandler = () => setDragging(undefined);\n    const mouseupHandler = (ev: MouseEvent) => {\n      setDragging(undefined);\n      setHovering(undefined);\n      if (ev.target instanceof HTMLElement && ev.target.dataset.index) {\n        const index = parseInt(ev.target.dataset.index);\n        if (isNaN(index)) return;\n        const overlapIndex = testOverlap(index);\n        if (typeof overlapIndex === \"undefined\") return;\n        else merge(index, overlapIndex, 0);\n      }\n    };\n\n    const { current } = targetRef;\n    current.addEventListener(\"mouseup\", mouseupHandler);\n    current.addEventListener(\"mouseleave\", mouseleaveHandler);\n    return () => {\n      current.removeEventListener(\"mouseup\", mouseupHandler);\n      current.removeEventListener(\"mouseleave\", mouseleaveHandler);\n    };\n  }, []);\n\n  useEffect(() => {\n    const mousemoveHandler = () => {\n      if (typeof draggingElement === \"undefined\") return;\n      const overlapIndex = testOverlap(draggingElement);\n      setHovering(overlapIndex);\n    };\n\n    const { current } = targetRef;\n    current.addEventListener(\"mousemove\", mousemoveHandler);\n    return () => {\n      current.removeEventListener(\"mousemove\", mousemoveHandler);\n    };\n  }, [draggingElement]);\n\n  useEffect(() => {\n    elementRefs.current = elementRefs.current.slice(0, elements.length);\n  }, [elements]);\n\n  return (\n    <MainScreen ref={targetRef}>\n      {elements.map((v, i) => (\n        <Element\n          key={v.id}\n          index={i}\n          elementId={v.elementId}\n          isDragging={draggingElement === i}\n          isHovering={hoveringElement === i}\n          onMouseDown={mousedownHandler(i)}\n          screenRef={targetRef}\n          ref={(el) => {\n            elementRefs.current[i] = el;\n          }}\n          zIndex={draggingElement === i ? maxZIndex + 1 : undefined}\n        />\n      ))}\n    </MainScreen>\n  );\n};\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\n\nexport interface ISaveState {\n  unlockedElements: number[];\n}\n\nexport const initialState = {\n  unlockedElements: [1, 2, 3, 4],\n} as ISaveState;\n\nconst saveSlice = createSlice({\n  name: \"save\",\n  initialState,\n  reducers: {\n    unlockElement(state, action: PayloadAction<number>) {\n      if (!state.unlockedElements.includes(action.payload))\n        state.unlockedElements.push(action.payload);\n    },\n  },\n});\n\nexport const { unlockElement } = saveSlice.actions;\n\nexport default saveSlice.reducer;\n","// From https://github.com/spotky1004/Bunch-of-Achievements/blob/main/src/util/SaveLoad.js\n\nexport function mergeObject(target: any, source: any) {\n  target = target ?? {};\n  for (const i in source) {\n    if (Array.isArray(source[i])) {\n      target[i] = target[i] ?? [];\n      mergeArray(target[i], source[i]);\n    } else if (typeof source[i] === \"object\") {\n      target[i] = mergeObject(target[i], source[i]);\n    } else {\n      target[i] = source[i].constructor(target[i] ?? source[i]);\n    }\n  }\n  return target;\n}\nexport function deepCopy<T>(obj: T): T {\n  return mergeObject({}, obj);\n}\n\nexport function mergeArray(target: Array<any>, source: Array<any>) {\n  for (let i = 0, l = source.length; i < l; i++) {\n    if (Array.isArray(source[i])) {\n      mergeArray(target[i], source[i]);\n    } else if (typeof source[i] === \"object\") {\n      target[i] = mergeObject(target[i], source[i]);\n    } else {\n      target[i] = source[i].constructor(target[i] ?? source[i]);\n    }\n  }\n  return target;\n}\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport saveReducer, {\n  initialState as saveInitialState,\n} from \"./slices/saveSlice\";\nimport { mergeObject } from \"./utils/merge\";\nimport _ from \"lodash\";\n\nconst persistedState = JSON.parse(\n  localStorage.getItem(\"notAMergeGame\") || \"{}\"\n);\n\nconst store = configureStore({\n  reducer: {\n    save: saveReducer,\n  },\n  preloadedState: mergeObject(persistedState, { save: saveInitialState }),\n});\n\nstore.subscribe(() => {\n  _.throttle(\n    () =>\n      localStorage.setItem(\"notAMergeGame\", JSON.stringify(store.getState())),\n    1000\n  );\n});\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\n\nexport default store;\n","import { createGlobalStyle } from \"styled-components\";\n\nexport const GlobalStyle = createGlobalStyle`\n  body {\n    overflow: hidden;\n  }\n  * {\n    margin: 0;\n    user-select: none;\n  }\n`;\n","export const theme = {\n  color: {\n    bg: \"#333\",\n    eleBg: \"#555\",\n    eleShadow: \"#000\",\n  },\n};\n","import React from \"react\";\nimport { Provider } from \"react-redux\";\nimport { ThemeProvider } from \"styled-components\";\nimport { GameScreen } from \"./components/GameScreen\";\nimport store from \"./store\";\nimport { GlobalStyle } from \"./styles/GlobalStyle\";\nimport { theme } from \"./styles/theme\";\nimport \"./font/font.css\";\n\nfunction App() {\n  return (\n    <>\n      <GlobalStyle />\n      <Provider store={store}>\n        <ThemeProvider theme={theme}>\n          <GameScreen />\n        </ThemeProvider>\n      </Provider>\n    </>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}